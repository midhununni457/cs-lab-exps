-- cursors.sql
-- Examples: IMPLICIT CURSOR, EXPLICIT CURSOR, CURSOR FOR LOOP

-- Implicit cursor example: simple SELECT INTO
DECLARE
  v_count NUMBER;
BEGIN
  SELECT COUNT(*) INTO v_count FROM students;
  DBMS_OUTPUT.PUT_LINE('Students: ' || v_count);
END;
/
-- Explicit cursor example
DECLARE
  CURSOR c_students IS SELECT student_id, first_name FROM students;
  v_student_id students.student_id%TYPE;
  v_first_name students.first_name%TYPE;
BEGIN
  OPEN c_students;
  LOOP
    FETCH c_students INTO v_student_id, v_first_name;
    EXIT WHEN c_students%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(v_student_id || ':' || v_first_name);
  END LOOP;
  CLOSE c_students;
END;
/
-- Cursor FOR LOOP (implicit open/fetch/close)
BEGIN
  FOR r IN (SELECT student_id, first_name FROM students) LOOP
    DBMS_OUTPUT.PUT_LINE(r.student_id || '-' || r.first_name);
  END LOOP;
END;
/
